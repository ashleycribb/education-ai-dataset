# AITA Reasoner: Usage Guide

## 1. Introduction

### Purpose
The AITA Reasoner feature aims to provide transparency into the pedagogical choices and actions taken by AI Tutors (AITAs) within the AITA ecosystem. By exposing the underlying intent and strategy for each AITA turn, educators can better understand how the AITA is working to support student learning, troubleshoot interactions, and contribute to the refinement of pedagogical models.

This guide explains the key data fields associated with the AITA Reasoner, where to find them, and how to interpret them.

## 2. Key Data Fields for AITA Reasoning

Two primary data fields are used to capture the AITA's pedagogical reasoning:

*   **`aita_turn_narrative_rationale`** (String):
    *   **Purpose**: Provides a concise, human-readable summary (typically 1-2 sentences) of the AITA's primary pedagogical intent or strategy for a specific turn.
    *   **Example**: "AITA is prompting the student to connect prior knowledge about ecosystems to the new concept of biotic factors."
    *   **Use**: Offers a quick understanding of the AITA's goal for that turn.

*   **`pedagogical_notes`** (List of Strings):
    *   **Purpose**: Contains a list of more detailed, atomic notes that break down the specific teaching strategies, intents, micro-scaffolding steps, or observations related to the AITA's utterance in that turn.
    *   **Example**:
        ```
        [
            "Acknowledge student's partially correct answer.",
            "Prompt for elaboration on 'biotic factors'.",
            "Reference previous turn's mention of 'living things'.",
            "Maintain positive and encouraging tone."
        ]
        ```
    *   **Use**: Allows for a granular analysis of the pedagogical tactics employed by the AITA. Supports the "teach how to learn" philosophy by making the AITA's pedagogy explicit.

## 3. Where to Find These Fields

These fields are integrated into various parts of the AITA ecosystem:

*   **Fine-Tuning Datasets**:
    *   Generated by `data_processing_scripts.py` (e.g., in files like `pilot_dataset_reading_compre_v1_iter2_reasoner.json`).
    *   Each AITA turn in these JSON files now includes `aita_turn_narrative_rationale` and `pedagogical_notes`.
    *   **Example JSON Snippet (within a dialogue turn object):**
        ```json
          {
            "turn_id": "gold_std_passage_kitten_001_main_idea_iter2_001_turn_1",
            "speaker": "AITA",
            "timestamp_utc": "2024-08-01T10:00:00Z",
            "utterance_modality": "text",
            "utterance": "Hi! Let's read 'Lily the Lost Kitten'.\n\n\"Lily the little kitten was lost...\"\n\nWhat is this story mostly about?",
            "pedagogical_notes": [
              "Greet student",
              "Present passage text",
              "Ask open-ended question to elicit initial thoughts on main idea."
            ],
            "aita_turn_narrative_rationale": "AITA presents the passage and asks an initial open-ended question to gauge the student's understanding of the main idea."
          }
        ```

*   **xAPI Interaction Logs (`xapi_statements.jsonl`):**
    *   When an AITA interaction is logged by `aita_mcp_client.py` or `aita_interaction_service.py`, the xAPI statements for AITA turns should include these fields within the `object.definition.extensions` attribute.
    *   **Example xAPI Extension Snippet (within an xAPI statement for an AITA turn):**
        ```json
        "object": {
            "objectType": "Activity",
            "id": "http://example.com/aita_pilot/session/session1/turn/1",
            "definition": {
                "name": {"en-US": "AITA Interaction Turn"},
                // ... other definition properties ...
                "extensions": {
                    // ... other extensions like aita_response_raw ...
                    "http://example.com/xapi/extensions/pedagogical_notes": [
                        "Greet student and present passage.",
                        "Ask open-ended question to elicit initial thoughts on main idea."
                    ],
                    "http://example.com/xapi/extensions/aita_turn_narrative_rationale": "AITA initiated the dialogue by presenting the story and asking a broad question to gauge the student's initial comprehension of the main idea."
                }
            }
        }
        ```
    *   This allows Learning Record Stores (LRS) to store this pedagogical context and makes it available for analytics.

*   **Teacher Oversight Dashboard:**
    *   The "Session Transcript View" page of the dashboard (`pages/02_Session_Transcript_View.py`) now displays the **AITA's Rationale** (from `aita_turn_narrative_rationale`) directly under the AITA's utterance.
    *   An expandable section titled "Detailed Pedagogical Notes" (from `pedagogical_notes`) is also available for each AITA turn, showing the list of specific notes.

## 4. How to Interpret and Use AITA Reasoner Information

Educators can use these fields in the Teacher Dashboard to:

*   **Understand AITA's Intent**: Quickly grasp why the AITA asked a particular question or provided specific feedback using the `aita_turn_narrative_rationale`.
*   **Analyze Pedagogical Strategies**: Delve into the `pedagogical_notes` to see the detailed breakdown of tactics (e.g., scaffolding, feedback type, error handling).
*   **Identify Effective Patterns**: Observe which AITA strategies correlate with positive student responses or learning gains (requires further analytics on LRS data).
*   **Troubleshoot Interactions**: If a student seems confused or the AITA's response appears off-target, these fields can provide context on what the AITA was *trying* to achieve.
*   **Provide Feedback for AITA Improvement**: Insights from these fields can inform suggestions for improving AITA dialogue design and SLM fine-tuning.
*   **Support Professional Development**: Reviewing AITA interactions with these explicit pedagogical markers can be a tool for teacher training and discussion about effective teaching strategies.

## 5. Generation of Reasoner Fields

*   **Current Method**: These fields are primarily generated by the `data_processing_scripts.py` when creating "gold standard" dialogue examples for fine-tuning and testing. The script includes logic to craft these rationales and notes based on the structure of the sample dialogues.
*   **Future Authoring**: The AITA Dialogue Authoring Tool (`aita_dialogue_authoring_tool.py`) will be updated in future iterations to allow human authors to write or refine `pedagogical_notes` and `aita_turn_narrative_rationale` for new or existing dialogue content.

## 6. Next Steps

The AITA Reasoner feature is an evolving part of the ecosystem. Future work may include:

*   Fine-tuning AITAs to *generate* their `aita_turn_narrative_rationale` dynamically based on their internal state or selected strategy.
*   Developing more sophisticated analytics in the Teacher Dashboard based on these fields (e.g., frequency of specific pedagogical notes, correlation of rationale types with student outcomes).
*   Implementing student-initiated requests for explanations in the `aita_mcp_client.py` and `AITA Interaction Service`, allowing students to ask "Why did you ask that?" and receive an age-appropriate response derived from these reasoner fields.

By providing greater transparency, the AITA Reasoner aims to foster trust and collaboration between educators and AI-powered learning tools.
